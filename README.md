# 🕐 시간표 생성기 (Timetable Producer)

**최적화된 제약조건 기반 시간표 자동 생성 시스템**

## ✨ 주요 기능

### 🎯 **강화된 제약조건 검증 시스템**
- **우선순위 기반 제약조건 검증**: 치명적(Critical) → 높음(High) → 중간(Medium) → 낮음(Low) 순으로 검증
- **실시간 제약조건 위반 감지**: 시간표 생성 과정에서 즉시 위반 사항 확인
- **종합적인 검증 보고서**: 모든 제약조건 위반 사항을 카테고리별로 분류하여 보고

### 🔧 **최적화된 스케줄링 알고리즘**
- **지능적 배치 우선순위**: 공간 제한 과목 → 시수 많은 과목 → 교과과목 순으로 배치
- **교사 시수 균형 최적화**: 교사별 시수 부족도를 고려한 최적 배치
- **재시도 기반 완화 전략**: 제약조건 충돌 시 우선순위를 점진적으로 완화하여 해결

### 📊 **상세한 제약조건 검증**

#### 치명적 위반 (Critical)
- 교사 중복 배정
- 교사 불가능 시간 위반

#### 높은 우선순위 위반 (High)
- 교사/학급별 시수 제한 초과
- 특별실 충돌
- 과목 시수 불일치
- 일일 과목 중복

#### 중간 우선순위 위반 (Medium)
- 공동수업 제약조건 위반
- 블록제 수업 제약조건 위반
- 교사 간 동시 수업 제약조건 위반

#### 낮은 우선순위 위반 (Low)
- 학년별 순차 수업 배정 제약조건 위반
- 선호도 기반 제약조건 위반

## 🚀 사용법

### 1. 기본 설정
- 학년, 학급 수, 교시 수 설정
- 요일별 교시 수 조정 가능

### 2. 과목 설정
- 과목별 주간 시수 설정
- 공간 제한 과목 지정 (특별실 필요)
- 병합 수업, 공동수업 설정
- 과목 분류 (교과과목, 창의적 체험활동)

### 3. 교사 설정
- 교사별 담당 과목 지정
- 교사별 주간 최대 시수 제한
- 학급별 시수 제한 설정
- 교사 불가능 시간 설정
- 교사 간 동시 수업 제약조건 설정

### 4. 제약조건 설정
- 필수 제약조건 (must)
- 선택적 제약조건 (optional)
- 블록제 수업 제약조건
- 공동수업 제약조건

### 5. 고정 수업 설정
- 특정 시간에 고정할 수업 지정
- 교사, 과목, 학급, 시간 설정

### 6. 최적화된 시간표 생성
- **"최적화 시간표 생성"** 버튼 클릭
- 실시간 진행률 및 로그 확인
- 제약조건 검증 결과 즉시 확인

## 🔍 제약조건 검증 결과 해석

### ✅ 성공적인 생성
```
✅ 최적화된 시간표 생성이 완료되었습니다!
📊 제약조건 검증 결과:
   - 치명적 위반: 0건
   - 높은 위반: 0건
   - 중간 위반: 0건
   - 낮은 위반: 0건
```

### ⚠️ 부분적 위반
```
✅ 최적화된 시간표 생성이 완료되었습니다!
📊 제약조건 검증 결과:
   - 치명적 위반: 0건
   - 높은 위반: 2건
   - 중간 위반: 1건
   - 낮은 위반: 3건
```

### ❌ 치명적 위반
```
❌ 최적화된 시간표 생성이 완료되었습니다!
📊 제약조건 검증 결과:
   - 치명적 위반: 1건
   - 높은 위반: 3건
   - 중간 위반: 2건
   - 낮은 위반: 1건
```

## 🛠️ 문제 해결

### 제약조건 위반이 발생하는 경우

1. **교사 중복 배정**
   - 교사 수를 늘리거나
   - 교사별 시수 제한을 조정

2. **특별실 충돌**
   - 특별실을 사용하는 과목의 시간을 분산하거나
   - 특별실 수를 늘리는 것을 고려

3. **시수 제한 초과**
   - 교사별/학급별 시수 제한을 현실적으로 조정
   - 과목별 시수를 재검토

4. **복잡한 제약조건 충돌**
   - 제약조건의 우선순위를 재검토
   - 일부 제약조건을 선택적(optional)으로 변경

## 📁 프로젝트 구조

```
src/
├── components/          # React 컴포넌트
├── core/               # 핵심 스케줄링 로직
│   ├── constraints.ts           # 제약조건 검증
│   ├── constraintValidator.ts   # 종합 제약조건 검증
│   ├── optimizedScheduler.ts    # 최적화된 스케줄러
│   ├── scheduler.ts             # 기본 스케줄러
│   └── ...
├── hooks/              # React 훅
├── types/              # TypeScript 타입 정의
├── utils/              # 유틸리티 함수
└── ...
```

## 🎯 최적화 알고리즘 특징

### 1. **지능적 우선순위 정렬**
```typescript
// 배치 우선순위
1. 공간 제한이 있는 과목 (특별실 필요)
2. 시수가 많은 과목
3. 교과과목
4. 창의적 체험활동
```

### 2. **교사 시수 균형 최적화**
```typescript
// 교사 선택 우선순위
1. 시수 부족한 교사 우선
2. 시수 활용도가 낮은 교사 우선
3. 제약조건 위반이 적은 슬롯 우선
```

### 3. **점진적 제약조건 완화**
```typescript
// 재시도별 제약조건 우선순위 조정
1차 시도: CRITICAL (치명적 제약조건만)
2차 시도: HIGH (높은 우선순위까지)
3차 시도: MEDIUM (중간 우선순위까지)
4차 시도: LOW (낮은 우선순위까지)
```

## 🔧 설치 및 실행

```bash
# 의존성 설치
npm install

# 개발 서버 실행
npm start

# 빌드
npm run build
```

## 📝 라이선스

MIT License

## 🤝 기여하기

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

**최적화된 제약조건 기반 시간표 생성으로 더 나은 교육 환경을 만들어보세요! 🎓** 