# 🏫 스마트 시간표 생성기 (Smart Timetable Generator)

**버전**: 2.1.0  
**최종 업데이트**: 2024년 12월

## 📋 목차

- [프로젝트 개요](#프로젝트-개요)
- [주요 기능](#주요-기능)
- [기술 스택](#기술-스택)
- [설치 및 실행](#설치-및-실행)
- [사용법](#사용법)
- [프로젝트 구조](#프로젝트-구조)
- [기존 시스템과의 차이점](#기존-시스템과의-차이점)
- [고급 기능](#고급-기능)
- [문제 해결](#문제-해결)

## 🎯 프로젝트 개요

스마트 시간표 생성기는 **엄격한 제약조건 준수**와 **우선순위 기반 알고리즘**을 통해 최적의 시간표를 생성하는 웹 애플리케이션입니다. 교사의 업무 효율성과 학생들의 학습 효과를 극대화하는 시간표를 자동으로 생성합니다.

### 🆕 최신 업데이트 (v2.1.0)

- **연속 수업 제한 시스템**: 교사의 연속 수업을 2시간으로 제한하여 피로도 감소
- **시간표 품질 평가**: 연속 수업 위반에 대한 페널티 기반 품질 점수 시스템
- **품질 분석 대시보드**: 시간표 품질을 시각적으로 분석하고 개선 방안 제시
- **스마트 백트래킹**: 연속 수업 제한을 고려한 지능형 백트래킹 알고리즘

## ✨ 주요 기능

### 🔒 엄격한 제약조건 시스템
- **교사 가능 시간**: 교사별 수업 가능 시간 엄격 준수
- **주간 과목 시간**: 학급별 주간 과목 시간 제한 준수
- **블록 수업**: 연속 교시 블록 수업 지원
- **공동 수업**: 복수 교사 공동 수업 지원
- **연속 수업 제한**: 교사별 연속 수업 2시간 제한 (권장사항)

### 🎯 우선순위 기반 알고리즘
- **난이도 기반 배치**: 배치하기 어려운 과목을 우선 처리
- **스마트 백트래킹**: 충돌 발생 시 지능형 되돌리기
- **후보 슬롯 캐싱**: 성능 최적화를 위한 슬롯 캐시 시스템
- **실패 분석**: 시간표 생성 실패 원인 상세 분석

### 🎨 개선된 시간표 UI
- **교사 시간표 우선**: 교사별 시간표를 메인 뷰로 제공
- **데스크톱 최적화**: 1280px 이상 화면에 최적화된 레이아웃
- **반응형 디자인**: 태블릿, 모바일 지원
- **가상화 지원**: 대용량 데이터 렌더링 최적화

### 📊 품질 평가 시스템
- **연속 수업 점수**: 연속 수업 위반에 대한 페널티 계산
- **종합 품질 점수**: 100점 만점 기준 시간표 품질 평가
- **위반 상세 분석**: 교사별, 요일별 연속 수업 위반 현황
- **개선 권장사항**: 품질 향상을 위한 구체적 방안 제시

### 📤 다양한 내보내기 옵션
- **Excel 내보내기**: 교사별, 학급별 시간표 Excel 파일 생성
- **JSON 내보내기**: 데이터 분석을 위한 JSON 형식 지원
- **PDF 내보내기**: 인쇄용 고품질 PDF 생성
- **이미지 내보내기**: 스크린샷 형태의 이미지 파일 생성

## 🛠 기술 스택

- **Frontend**: React 18, TypeScript
- **Styling**: Tailwind CSS
- **Build Tool**: Webpack 5
- **Export Libraries**: xlsx, jsPDF, html2canvas
- **Development**: ESLint, Prettier

## 🚀 설치 및 실행

### 1. 저장소 클론
```bash
git clone <repository-url>
cd timetable-producer
```

### 2. 의존성 설치
```bash
npm install
```

### 3. 개발 서버 실행
```bash
npm start
```

### 4. 프로덕션 빌드
```bash
npm run build
```

## 📖 사용법

### 1. 기본 설정
- **교사 정보**: 교사명, 수업 가능 시간, 주간 수업 시간 설정
- **학급 정보**: 학급명, 주간 과목별 수업 시간 설정
- **과목 정보**: 과목명, 블록 수업 여부, 공동 수업 교사 설정

### 2. 시간표 생성
- **자동 생성**: 모든 제약조건을 고려한 자동 시간표 생성
- **수동 생성**: 단계별 수동 시간표 생성
- **긴급 모드**: 제약조건을 일부 완화한 빠른 생성

### 3. 결과 검토
- **교사 시간표**: 교사별 주간 시간표 확인
- **학급 시간표**: 학급별 주간 시간표 확인
- **품질 분석**: 연속 수업 위반 및 품질 점수 확인
- **실패 분석**: 생성 실패 시 원인 분석

### 4. 내보내기
- **Excel**: 교사별/학급별 시간표 Excel 파일 다운로드
- **PDF**: 인쇄용 PDF 파일 생성
- **JSON**: 데이터 분석용 JSON 파일 생성

## 📁 프로젝트 구조

```
src/
├── components/           # React 컴포넌트
│   ├── TeacherTimetable.tsx      # 교사 시간표 컴포넌트
│   ├── ClassTimetable.tsx        # 학급 시간표 컴포넌트
│   ├── VirtualizedTimetable.tsx  # 가상화된 시간표 컴포넌트
│   ├── ReviewAndExportNew.js     # 검토 및 내보내기 컴포넌트
│   ├── FailureAnalysis.tsx       # 실패 분석 컴포넌트
│   └── TimetableQualityAnalysis.tsx # 품질 분석 컴포넌트
├── core/                # 핵심 로직
│   ├── enhancedScheduler.ts      # 향상된 스케줄러
│   ├── constraintChecker.ts      # 제약조건 검증
│   ├── postValidator.ts          # 후처리 검증
│   └── scheduler.ts              # 메인 스케줄러
├── utils/               # 유틸리티
│   ├── consecutiveTeachingValidator.ts # 연속 수업 검증
│   ├── helpers.ts               # 헬퍼 함수
│   └── pdfExporter.ts           # PDF 내보내기
├── hooks/               # React 훅
├── types/               # TypeScript 타입 정의
└── styles/              # 스타일 파일
```

## 🔄 기존 시스템과의 차이점

| 구분 | 기존 시스템 | 개선된 시스템 |
|------|-------------|---------------|
| **제약조건** | 부분적 준수 | 엄격한 준수 |
| **알고리즘** | 단순 배치 | 우선순위 기반 |
| **백트래킹** | 기본 | 스마트 백트래킹 |
| **UI 레이아웃** | 좁은 화면 | 데스크톱 최적화 |
| **성능** | 기본 | 가상화 지원 |
| **내보내기** | Excel만 | Excel, PDF, JSON |
| **품질 평가** | 없음 | 연속 수업 제한 기반 |
| **실패 분석** | 기본 | 상세 분석 |

## ⚙️ 설정 옵션

### 교사 설정
- **교사명**: 교사 식별을 위한 이름
- **수업 가능 시간**: 교사별 수업 가능한 요일/교시
- **주간 수업 시간**: 교사별 주간 최대 수업 시간
- **연속 수업 제한**: 최대 연속 수업 시간 (기본: 2시간)

### 학급 설정
- **학급명**: 학급 식별을 위한 이름
- **주간 과목 시간**: 과목별 주간 수업 시간
- **블록 수업**: 연속 교시 수업 여부
- **공동 수업**: 복수 교사 수업 여부

### 과목 설정
- **과목명**: 과목 식별을 위한 이름
- **블록 수업**: 2교시 연속 수업 여부
- **공동 수업 교사**: 복수 교사 지정

## 🎯 고급 기능

### 연속 수업 제한 시스템
- **Soft Constraint**: 연속 수업 제한은 권장사항으로 처리
- **페널티 기반**: 위반 시 슬롯 점수에서 페널티 차감
- **품질 점수**: 100점 만점 기준 연속 수업 위반 반영
- **개선 방안**: 구체적인 시간표 개선 권장사항 제공

### 가상화 지원
- **성능 최적화**: 대용량 데이터 렌더링 최적화
- **메모리 효율성**: 필요한 부분만 렌더링
- **부드러운 스크롤**: 대용량 시간표에서도 부드러운 스크롤

### PDF 내보내기
- **고품질 출력**: 인쇄용 고품질 PDF 생성
- **다중 페이지**: 교사별/학급별 시간표 분리
- **목차 자동 생성**: PDF 내 목차 자동 생성
- **이미지 내보내기**: 스크린샷 형태 이미지 파일 생성

## 📊 출력 형식

### Excel 형식
- **교사별 시간표**: 교사별 주간 시간표 시트
- **학급별 시간표**: 학급별 주간 시간표 시트
- **요약 정보**: 시간표 생성 정보 및 통계

### PDF 출력 형식
- **A4 용지**: 표준 A4 용지 크기
- **고해상도**: 300 DPI 고해상도 출력
- **다중 페이지**: 교사별/학급별 페이지 분리
- **목차**: 자동 생성된 목차 포함

### JSON 형식
- **완전한 데이터**: 모든 시간표 데이터 포함
- **메타데이터**: 생성 정보 및 통계 포함
- **분석 지원**: 데이터 분석 도구 호환

## 🐛 문제 해결

### 시간표 생성 실패
1. **제약조건 확인**: 교사 가능 시간, 학급 주간 시간 확인
2. **실패 분석**: 상세한 실패 원인 분석 결과 확인
3. **설정 조정**: 제약조건 완화 또는 조정

### 성능 문제
1. **가상화 확인**: 대용량 데이터 시 가상화 활성화
2. **브라우저 최적화**: 최신 브라우저 사용 권장
3. **메모리 관리**: 불필요한 탭 닫기

### UI 성능 문제
1. **화면 크기**: 1280px 이상 화면 권장
2. **브라우저 캐시**: 브라우저 캐시 정리
3. **하드웨어 가속**: GPU 가속 활성화

### 내보내기 오류
1. **파일 권한**: 다운로드 폴더 권한 확인
2. **브라우저 설정**: 팝업 차단 해제
3. **파일 크기**: 대용량 파일 시 시간 대기

## 📈 성능 지표

### 시간표 생성 성능
- **평균 생성 시간**: 2-5초 (복잡도에 따라 변동)
- **성공률**: 95% 이상 (적절한 제약조건 설정 시)
- **메모리 사용량**: 50-100MB (데이터 크기에 따라 변동)

### 품질 지표
- **연속 수업 위반**: 평균 0-3건 (설정에 따라 변동)
- **품질 점수**: 평균 85-95점 (연속 수업 제한 준수 시)
- **교사 만족도**: 연속 수업 제한으로 인한 피로도 감소

## 🔮 향후 계획

- **AI 기반 최적화**: 머신러닝을 활용한 시간표 최적화
- **실시간 협업**: 다중 사용자 실시간 협업 기능
- **모바일 앱**: 네이티브 모바일 애플리케이션 개발
- **클라우드 연동**: 클라우드 기반 데이터 동기화

---

**개발자**: Smart Timetable Team  
**라이선스**: MIT License  
**지원**: GitHub Issues를 통한 버그 리포트 및 기능 요청 